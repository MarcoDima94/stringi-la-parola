<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stringi la Parola</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <meta name="theme-color" content="#546A7B">

    <script defer src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/js/all.min.js"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <main class="app-content">
        <div class="game-container">
            
            <div id="home-screen" class="game-screen active">
                <div class="screen-content">
                    <div class="logo">
                        <i class="fa-solid fa-lightbulb-on"></i>
                    </div>
                    <h1 class="app-main-title">Stringi la Parola</h1>
                    <button id="go-to-mode-selection-btn" class="btn btn-primary">
                        <i class="fa-solid fa-play"></i> Inizia a Giocare
                    </button>
                </div>
            </div>

            <div id="mode-selection-screen" class="game-screen">
                <div class="screen-content">
                    <h2>Modalità di Gioco</h2>
                    <button id="single-player-btn" class="btn btn-secondary">
                        <i class="fa-solid fa-user"></i> Giocatore Singolo
                    </button>
                    <button id="multiplayer-btn" class="btn btn-secondary">
                        <i class="fa-solid fa-users"></i> Multigiocatore
                    </button>
                    <button id="tutorial-btn" class="btn btn-secondary btn-subtle">
                        <i class="fa-solid fa-book-open-reader"></i> Come si gioca?
                    </button>
                </div>
                <div class="screen-footer">
                    <button id="back-to-home-btn" class="btn btn-tertiary">
                        <i class="fa-solid fa-arrow-left-long"></i> Indietro
                    </button>
                </div>
            </div>
            
            <div id="difficulty-screen" class="game-screen">
                <div class="screen-content">
                    <h2>Scegli la difficoltà</h2>
                    <button id="difficulty-beginner-btn" class="btn btn-secondary">
                        <i class="fa-solid fa-seedling"></i> Principiante
                    </button>
                    <button id="difficulty-intermediate-btn" class="btn btn-secondary">
                        <i class="fa-solid fa-rocket-launch"></i> Intermedio
                    </button>
                    <button id="difficulty-expert-btn" class="btn btn-secondary">
                        <i class="fa-solid fa-crown"></i> Esperto
                    </button>
                </div>
                 <div class="screen-footer">
                    <button id="back-to-mode-btn" class="btn btn-tertiary">
                        <i class="fa-solid fa-arrow-left-long"></i> Indietro
                    </button>
                </div>
            </div>

            <div id="setup-screen" class="game-screen">
                <div class="screen-content">
                    <h2>Imposta la Parola</h2>
                    <p id="setup-rules">Il Master inserisce la parola.</p>
                    <div class="input-group">
                        <input type="password" id="secret-word-input" placeholder="Scrivi la parola segreta...">
                    </div>
                    <button id="start-game-btn" class="btn btn-primary">Inizia Partita</button>
                </div>
                 <div class="screen-footer">
                    <button id="back-to-difficulty-setup-btn" class="btn btn-tertiary">
                        <i class="fa-solid fa-arrow-left-long"></i> Indietro
                    </button>
                </div>
            </div>

            <div id="game-screen" class="game-screen">
                <div id="game-status">
                    <p>La parola è tra</p>
                    <div class="bounds">
                        <div class="bound-box" id="lower-bound">A</div>
                        <div class="bound-box" id="upper-bound">Z</div>
                    </div>
                </div>
                <div class="input-group">
                    <input type="text" id="guess-input" placeholder="Scrivi una parola...">
                </div>
                <button id="submit-guess-btn" class="btn btn-primary">Indovina</button>
                <div class="guesses-container">
                    <h3>Tentativi</h3>
                    <ul id="guesses-list"></ul>
                </div>
                 <div class="screen-footer game-footer">
                    <button id="back-to-difficulty-game-btn" class="btn btn-tertiary">
                        <i class="fa-solid fa-arrow-left-long"></i> Indietro
                    </button>
                    <button id="surrender-btn" class="btn btn-tertiary">
                        <i class="fa-solid fa-flag"></i> Mi arrendo
                    </button>
                 </div>
                 <button id="show-word-btn" class="btn btn-subtle">Mostra Parola (Master)</button>
            </div>

            <div id="game-over-win-screen" class="game-screen">
                <div class="screen-content">
                    <div class="result-icon win-icon"><i class="fa-solid fa-trophy"></i></div>
                    <h2>VITTORIA!</h2>
                    <p>La parola era:</p>
                    <p id="final-word-win" class="final-word"></p>
                    <button id="new-game-win-btn" class="btn btn-primary">Gioca Ancora</button>
                </div>
            </div>

            <div id="game-over-lose-screen" class="game-screen">
                <div class="screen-content">
                    <div class="result-icon lose-icon"><i class="fa-regular fa-face-sad-tear"></i></div>
                    <h2>SCONFITTA</h2>
                    <p>La parola segreta era:</p>
                    <p id="final-word-lose" class="final-word"></p>
                    <button id="new-game-lose-btn" class="btn btn-primary">Riprova</button>
                </div>
            </div>

        </div>
    </main>

    <div id="help-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fa-solid fa-book-open-reader"></i> Come si Gioca: La Guida</h2>
                <span id="modal-close-btn" class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <p>Benvenuto in <strong>Stringi la Parola</strong>! L'obiettivo è scoprire una parola misteriosa. Ad ogni tentativo, il gioco ti dirà un unico, fondamentale indizio: ti dirà se la parola segreta si trova <strong>PRIMA</strong> o <strong>DOPO</strong> la tua, in rigoroso ordine alfabetico.</p>
            
                <h3 class="tutorial-heading">La Schermata di Gioco</h3>
                <p>Durante la partita, vedrai due "limiti" (all'inizio <strong>A</strong> e <strong>Z</strong>). Il tuo scopo è rendere questo intervallo sempre più piccolo, fino a isolare la parola segreta.</p>
    
                <h3 class="tutorial-heading">Esempio Pratico</h3>
                <p>Immaginiamo che la parola segreta da indovinare sia <strong>MOTORE</strong>.</p>
                <ol class="tutorial-list">
                    <li>
                        <strong>Tentativo 1:</strong> Provi con <strong>CANE</strong>.<br>
                        La "M" di MOTORE viene <em>dopo</em> la "C" di CANE nell'alfabeto. L'indizio del gioco sarà: **DOPO**. Ora sai che la parola è compresa nell'intervallo tra **CANE** e **Z**. I limiti si sono stretti!
                    </li>
                    <li>
                        <strong>Tentativo 2:</strong> Sai che la parola viene dopo CANE, quindi provi con una parola più avanti nell'alfabeto, ad esempio **TRENO**.<br>
                        La "M" di MOTORE viene <em>prima</em> della "T" di TRENO. L'indizio sarà: **PRIMA**. Fantastico! Hai appena "stretto" l'intervallo in modo significativo. Ora sai che la parola segreta è tra **CANE** e **TRENO**.
                    </li>
                    <li>
                        <strong>Tentativo 3:</strong> Cerchi una parola a metà strada, come **LUNA**.<br>
                        La "M" di MOTORE viene <em>dopo</em> la "L" di LUNA. L'indizio sarà: **DOPO**. L'intervallo si restringe ancora di più! La parola ora è tra **LUNA** e **TRENO**.
                    </li>
                </ol>
                <p>Continua ad usare questa logica per dimezzare le possibilità ad ogni tentativo finché non indovini la parola esatta!</p>
    
                <h3 class="tutorial-heading">Livelli di Difficoltà</h3>
                <ul class="difficulty-explanation">
                    <li><strong>Principiante:</strong> Perfetto per imparare. Si gioca solo con parole corte (fino a 4 lettere).</li>
                    <li><strong>Intermedio:</strong> La sfida si fa interessante. Le parole segrete hanno 5 o 6 lettere.</li>
                    <li><strong>Esperto:</strong> Metti alla prova la tua abilità! Si gioca solo con parole lunghe (7 o più lettere).</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button id="close-tutorial-btn" class="btn btn-primary">Ho Capito!</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(reg => {
                    console.log('Service worker registrato.', reg);
                }).catch(err => {
                    console.error('Registrazione Service Worker fallita:', err);
                });
            });
        }
    </script>
</body>
</html>